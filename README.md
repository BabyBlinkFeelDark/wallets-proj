# Wallet API
Этот проект представляет собой API для управления кошельками и операциями с ними. С помощью этого API можно создавать кошельки, проверять их баланс, а также выполнять операции по пополнению и снятию средств.

## Технологии
- Python 3.9+
- Django 3.x+
- Django REST Framework
- PostgreSQL 
- Locust (нагрузочное тестирование)
- Docker
- Docker Compose

## Установка и настройка
### 1. Клонируйте репозиторий
```bash
git clone https://github.com/BabyBlinkFeelDark/wallets-proj.git
cd wallets-proj
```

### 2. Сборка и запуск контейнеров с помощью Docker Compose
В корневой директории проекта, выполните следующую команду для сборки и запуска контейнеров:

```bash
docker-compose up --build
```
Docker Compose создаст необходимые контейнеры для приложения и базы данных, а затем запустит их.

### 3. Доступ к приложению
После успешного запуска, ваше приложение будет доступно по адресу:

API: `http://127.0.0.1:8000/`

Админка Django: `http://127.0.0.1:8000/admin/`

Locuts: `http://127.0.0.1:8089`

### 4. Миграции базы данных
Если вы хотите выполнить миграции базы применяются автоматически, при запуске контейнеров. Для миграции данных вручную, используйте следующую команду:

```bash
docker-compose exec web python manage.py migrate
```

## Работа с Docker
### 1. Остановка контейнеров
Чтобы остановить контейнеры, выполните команду:

```bash
docker-compose down
```

### 2. Запуск контейнеров в фоновом режиме
Для запуска контейнеров в фоновом режиме используйте:

```bash
docker-compose up -d
```

### 3. Проверка логов
Для просмотра логов контейнера с приложением используйте:

```bash
docker-compose logs -f web
```

## Endpoints
### 1. Создание кошелька
- URL: `/api/v1/wallets/`
- Метод: `POST`
- Ответ:
```json
{
    "id": "UUID-кошелька",
    "balance": 0.0
}
```

### 2. Получение данных о кошельке
- URL: `/api/v1/wallets/{wallet_uuid}/`
- Метод: `GET`
- Ответ:
```json
{
    "id": "UUID-кошелька",
    "balance": 100.0
}
```

### 3. Операции с кошельком (депозит и вывод средств)
- URL: `/api/v1/wallets/{wallet_uuid}/operation/`
- Метод: `POST`
- Тело запроса: `(JSON)`
```json
{
    "operation_type": "DEPOSIT",  # или "WITHDRAW"
    "amount": 50.0
}
```

- Ответ: (в случае успешной операции)
```json
{
    "balance": 150.0
}
```

